local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local key = "Beamed"  -- Correct key to unlock the script

local function createGUI()
    -- Create the key input GUI
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    ScreenGui.Name = "KeySystemGui"

    local KeyFrame = Instance.new("Frame")
    KeyFrame.Parent = ScreenGui
    KeyFrame.Size = UDim2.new(0.4, 0, 0.5, 0) -- Increased height for the new button
    KeyFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
    KeyFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    KeyFrame.BorderSizePixel = 3
    KeyFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)

    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Parent = KeyFrame
    TitleLabel.Size = UDim2.new(1, 0, 0.2, 0)
    TitleLabel.Position = UDim2.new(0, 0, 0, 0)
    TitleLabel.Text = "Enter Key"
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.TextScaled = true
    TitleLabel.BackgroundTransparency = 1

    local KeyInput = Instance.new("TextBox")
    KeyInput.Parent = KeyFrame
    KeyInput.Size = UDim2.new(0.8, 0, 0.2, 0)
    KeyInput.Position = UDim2.new(0.1, 0, 0.3, 0)
    KeyInput.PlaceholderText = "Enter Key"
    KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    KeyInput.BorderSizePixel = 2
    KeyInput.BorderColor3 = Color3.fromRGB(0, 0, 0)
    KeyInput.TextScaled = true

    local SubmitButton = Instance.new("TextButton")
    SubmitButton.Parent = KeyFrame
    SubmitButton.Size = UDim2.new(0.8, 0, 0.2, 0)
    SubmitButton.Position = UDim2.new(0.1, 0, 0.55, 0)
    SubmitButton.Text = "Submit"
    SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    SubmitButton.BorderSizePixel = 2
    SubmitButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    SubmitButton.TextScaled = true

    local InvalidKeyLabel = Instance.new("TextLabel")
    InvalidKeyLabel.Parent = KeyFrame
    InvalidKeyLabel.Size = UDim2.new(1, 0, 0.2, 0)
    InvalidKeyLabel.Position = UDim2.new(0, 0, 1, 0)
    InvalidKeyLabel.Text = ""
    InvalidKeyLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
    InvalidKeyLabel.TextScaled = true
    InvalidKeyLabel.BackgroundTransparency = 1

    -- Discord Invite Button
    local DiscordInviteButton = Instance.new("TextButton")
    DiscordInviteButton.Parent = KeyFrame
    DiscordInviteButton.Size = UDim2.new(0.8, 0, 0.2, 0)
    DiscordInviteButton.Position = UDim2.new(0.1, 0, 0.8, 0) -- Positioned below the Submit button
    DiscordInviteButton.Text = "Discord Invite"
    DiscordInviteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    DiscordInviteButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255) -- Blue color
    DiscordInviteButton.BorderSizePixel = 2
    DiscordInviteButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    DiscordInviteButton.TextScaled = true

    -- Draggable functionality
    local dragging = false
    local dragInput, dragStart, startPos

    local function update(input)
        local delta = input.Position - dragStart
        KeyFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    KeyFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = KeyFrame.Position
            input.Changed:Connect(function()
                if not dragging then return end
                update(input)
            end)
        end
    end)

    KeyFrame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)

    -- Function to ensure GUI remains after respawn
    game.Players.LocalPlayer.CharacterAdded:Connect(function()
        -- Recreate GUI when the player respawns
        if ScreenGui then
            ScreenGui:Destroy()
        end
        wait(1) -- Delay before recreating
        createGUI()
    end)

    -- Discord Invite Button click event
    DiscordInviteButton.MouseButton1Click:Connect(function()
        -- Open the Discord invite link in a browser
        setclipboard("https://discord.gg/JFFp2Y9BEV")
        Fluent:Notify({
            Title = "Discord Invite",
            Content = "The Discord invite link has been copied to your clipboard.",
            Duration = 5
        })
    end)
    
    -- Submit Button click event
    SubmitButton.MouseButton1Click:Connect(function()
        local enteredKey = KeyInput.Text
        if enteredKey == key then
            -- Code for valid key entered
            Fluent:Notify({
                Title = "Key Accepted",
                Content = "The correct key was entered!",
                Duration = 5
            })
            -- You can add additional actions after the key is verified here
            KeyFrame:Destroy() -- Destroy the key input frame after successful entry
        else
            InvalidKeyLabel.Text = "Invalid Key!"
        end
    end)
end

-- Call createGUI function to initially create the GUI
createGUI()
